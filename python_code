#pip install alpha_vantage
from alpha_vantage.timeseries import TimeSeries
import matplotlib.pyplot as plt
from pprint import pprint

ts = TimeSeries(key='KO4LXTUOQBO9OXC2', output_format='pandas')
#data, meta_data = ts.get_intraday(symbol='MSFT',interval='1min', outputsize='full')
data , meta_data = ts.get_daily(symbol ='MSFT', outputsize='full')
pprint(data.head())

data['4. close'].plot()
plt.title('Dily times Series for the MSFT stock from 1999-10-4')
plt.show()

from alpha_vantage.techindicators import TechIndicators
import matplotlib.pyplot as plt
ti = TechIndicators(key='KO4LXTUOQBO9OXC2', output_format='pandas')
#ti = TechIndicators(key={}, output_format='pandas').format(api_ke)
data, meta_data = ti.get_bbands(symbol='MSFT', interval='60min', time_period=60)
data.plot()
plt.title('BBbands indicator for  MSFT stock (60 min)')
plt.show()

import matplotlib.ticker as mticker
from matplotlib.finance import candlestick_ohlc

 pip install plotly==4.1.0
import plotly.graph_objects as go
fig = go.Figure(data=go.Ohlc(x=data['Date'],
                open=df['1. open'],
                high=df['2. high'],
                low=df['3. low'],
                close=df['4. close']))
fig.update(layout_xaxis_rangeslider_visible=False)
fig.show()
